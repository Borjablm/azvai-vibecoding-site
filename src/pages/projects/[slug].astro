---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { projects, getProjectBySlug } from "../../data/projects";

export function getStaticPaths() {
  return projects.map((project) => ({ params: { slug: project.slug } }));
}

const { slug } = Astro.params;
const project = getProjectBySlug(slug ?? "");

if (!project) {
  return Astro.redirect("/projects");
}
---

<BaseLayout title={`${project.title} | AZVAI AI Playground`} current="projects">
  <a href="/projects" class="back-link">&larr; All projects</a>

  <section class="hero" style="padding-top: 1.5rem;">
    <span class="category-badge" set:html={project.icon + ' ' + project.category} />
    <h1>{project.title}</h1>
    <p class="lead">{project.summary}</p>
    {project.liveUrl && (
      <a href={project.liveUrl} class="live-link" target="_blank" rel="noopener noreferrer">
        Visit live site &nearr;
      </a>
    )}
  </section>

  {project.image && (
    <div class="project-hero-image">
      <img src={project.image} alt={`${project.title} screenshot`} loading="lazy" />
    </div>
  )}

  <section class="grid project-grid">
    <article class="card span-8">
      <p class="card-meta">Highlights</p>
      <ul class="project-list">
        {project.highlights.map((item) => (
          <li>{item}</li>
        ))}
      </ul>
    </article>

    <article class="card span-4 project-sidebar">
      <p class="card-meta">Category</p>
      <p>{project.category}</p>
      <p class="card-meta">Stack</p>
      <ul class="chip-list">
        {project.stack.map((item) => (
          <li>{item}</li>
        ))}
      </ul>
      <p class="card-meta">Infrastructure</p>
      <ul class="chip-list">
        {project.infra.map((item) => (
          <li>{item}</li>
        ))}
      </ul>
      <p class="card-meta">Source Context</p>
      <p class="context-path">{project.contextPath}</p>
    </article>
  </section>
</BaseLayout>
